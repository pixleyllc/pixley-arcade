<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Snake ‚Äì Pixley Arcade</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="stylesheet" href="../../css/style.css">
  <style>
    html, body {
      background: #18181a;
      color: #ffe066;
      margin: 0;
      padding: 0;
      font-family: 'Bebas Neue', Arial, sans-serif;
    }
    .logo, nav { margin-left: auto; margin-right: auto; }
    .main-content { max-width: 430px; margin: 28px auto 0 auto; text-align: center; }
    h2 { font-size: 2em; letter-spacing: 0.08em; margin-bottom: 16px; margin-top: 20px;}
    #snake-board {
      margin: 28px auto 16px auto;
      display: grid;
      grid-template-rows: repeat(20, 1fr);
      grid-template-columns: repeat(20, 1fr);
      gap: 2px;
      background: #232326;
      border-radius: 13px;
      box-shadow: 0 2px 18px rgba(0,0,0,0.22);
      width: 320px;
      height: 320px;
      max-width: 94vw;
      max-height: 94vw;
      aspect-ratio: 1 / 1;
      position: relative;
    }
    .snake-cell {
      background: #ffe066;
      border-radius: 3px;
      width: 100%; height: 100%;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
    }
    .food-cell {
      background: #ff7f50;
      border-radius: 50%;
      width: 100%; height: 100%;
      box-shadow: 0 1px 4px rgba(255,127,80,0.16);
    }
    #snake-score { font-size: 1.17em; margin: 10px 0; }
    .controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 8px;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }
    .controls button {
      background: #ffe066;
      border: none;
      color: #18181a;
      border-radius: 12px;
      padding: 0;
      width: 52px;
      height: 52px;
      font-size: 1.55em;
      font-weight: bold;
      box-shadow: 0 2px 10px #ffe06633;
      cursor: pointer;
      transition: box-shadow 0.14s, background 0.12s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .controls button:active {
      background: #ffef80;
      box-shadow: 0 2px 16px #ffe06655;
    }
    .back-btn {
      margin-top: 24px;
      background: #ffe066;
      color: #18181a;
      border: none;
      border-radius: 10px;
      font-size: 1em;
      font-weight: bold;
      padding: 8px 24px;
      cursor: pointer;
      transition: box-shadow 0.12s;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    .back-btn:hover { box-shadow: 0 2px 10px #ffe06633; }
    .footer-note { margin-top: 32px; }
    @media (max-width: 600px) {
      #snake-board {
        width: 97vw;
        max-width: 99vw;
        height: auto;
        max-height: unset;
        aspect-ratio: 1 / 1;
      }
      .controls button {
        width: 46px; height: 46px; font-size: 1.33em;
      }
      .main-content { padding: 0 3vw; }
    }
  </style>
</head>
<body>
  <div class="logo">PIXLEY</div>
  <nav>
    <a href="../../index.html" title="Home">üè†</a>
    <a href="../../leaderboard/index.html" title="Leaderboard">üèÜ</a>
    <a href="../../auth/login.html" title="Sign In">üîë</a>
    <a href="mailto:support@pixleyarcade.com" title="Support">üì©</a>
  </nav>
  <div class="main-content">
    <h2>SNAKE</h2>
    <div id="snake-score">SCORE: 0</div>
    <div id="snake-board"></div>
    <div class="controls">
      <button onclick="moveLeft()" title="Left">‚óÄÔ∏è</button>
      <div style="display:flex; flex-direction:column; gap:3px;">
        <button onclick="moveUp()" title="Up">‚ñ≤</button>
        <button onclick="moveDown()" title="Down">‚ñº</button>
      </div>
      <button onclick="moveRight()" title="Right">‚ñ∂Ô∏è</button>
    </div>
    <button class="back-btn" onclick="window.location.href='../../index.html'">‚Üê Back to Arcade</button>
    <div class="footer-note">
      <span style="color:#ffe066;">HOW LONG CAN YOU LAST? DON'T RUN INTO YOURSELF!</span>
    </div>
  </div>
  <script>
    // --- Pixley Arcade Snake Game (Mobile/Desktop) ---
    const N = 20, M = 20;
    let boardElem = document.getElementById('snake-board');
    let scoreElem = document.getElementById('snake-score');
    let snake, food, dir, score, speed, gameOver, tick;
    function reset() {
      snake = [{x:10,y:10},{x:9,y:10},{x:8,y:10}];
      dir = {x:1, y:0};
      score = 0; speed = 120; gameOver = false;
      spawnFood();
      render();
      clearInterval(tick);
      tick = setInterval(step, speed);
    }
    function spawnFood() {
      while (true) {
        let fx = Math.floor(Math.random()*M), fy = Math.floor(Math.random()*N);
        if (!snake.some(s=>s.x===fx&&s.y===fy)) {
          food = {x:fx,y:fy};
          return;
        }
      }
    }
    function render() {
      boardElem.innerHTML = '';
      for (let y=0; y<N; y++) {
        for (let x=0; x<M; x++) {
          let div = document.createElement('div');
          if (snake.some(s=>s.x===x&&s.y===y)) div.className = 'snake-cell';
          if (food.x===x&&food.y===y) div.className = 'food-cell';
          boardElem.appendChild(div);
        }
      }
      scoreElem.textContent = 'SCORE: ' + score;
    }
    function step() {
      if (gameOver) return;
      let head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
      if (head.x<0||head.x>=M||head.y<0||head.y>=N||snake.some(s=>s.x===head.x&&s.y===head.y)) {
        gameOver = true;
        clearInterval(tick);
        setTimeout(()=>{alert('Game Over! Score: ' + score); reset();}, 10);
        return;
      }
      snake.unshift(head);
      if (head.x===food.x&&head.y===food.y) {
        score += 10; spawnFood();
      } else {
        snake.pop();
      }
      render();
    }
    function setDir(dx, dy) {
      if (gameOver) return;
      // Prevent reversing
      if (snake.length>1 && snake[0].x+dx===snake[1].x && snake[0].y+dy===snake[1].y) return;
      dir = {x:dx, y:dy};
    }
    function moveLeft()  { setDir(-1,0);}
    function moveRight() { setDir(1,0);}
    function moveUp()    { setDir(0,-1);}
    function moveDown()  { setDir(0,1);}
    document.addEventListener('keydown', e=>{
      if (e.key==='ArrowLeft') moveLeft();
      if (e.key==='ArrowRight') moveRight();
      if (e.key==='ArrowUp') moveUp();
      if (e.key==='ArrowDown') moveDown();
    });
    window.moveLeft = moveLeft;
    window.moveRight = moveRight;
    window.moveUp = moveUp;
    window.moveDown = moveDown;
    reset();
  </script>
</body>
</html>
